<div class="bg-white py-12">
    @if (post(); as post) {
        <div class="container mx-auto px-6">
            <article class="prose lg:prose-lg max-w-3xl mx-auto">
                <!-- Article Header -->
                <header class="mb-8">
                    <div class="flex flex-wrap gap-2 mb-4">
                        @for(tag of post.tags; track tag) {
                            <span class="inline-block bg-primary-100 text-primary-800 text-sm font-semibold px-3 py-1 rounded-full">{{tag}}</span>
                        }
                    </div>
                    <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 leading-tight">
                        {{ post.title }}
                    </h1>
                    @if (author(); as author) {
                        <div class="mt-6 flex items-center">
                            <div class="ml-3">
                                <p class="text-sm font-medium text-gray-900">
                                    {{ author.name }}
                                </p>
                                <div class="flex space-x-1 text-sm text-gray-500">
                                    <time [attr.datetime]="post.updatedAt">{{ post.updatedAt }}</time>
                                </div>
                            </div>
                        </div>
                    }
                </header>

                <!-- Article Content -->
                <div [innerHTML]="post.content"></div>
            </article>

             <!-- Related Posts -->
            <section class="max-w-5xl mx-auto mt-16 pt-12 border-t border-gray-200">
                 <h2 class="text-2xl font-bold text-center text-gray-800 mb-8">Related Articles</h2>
                 @if (relatedPosts().length > 0) {
                     <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        @for (related of relatedPosts(); track related.id) {
                            <a [routerLink]="['/blog', related.slug]" class="block bg-white rounded-lg shadow-md overflow-hidden group transform hover:-translate-y-1 transition-transform duration-300 border">
                                <img [src]="related.thumbnail" alt="" class="h-40 w-full object-cover">
                                <div class="p-4">
                                    <h3 class="text-lg font-bold text-gray-800 mb-2 group-hover:text-primary-600 transition-colors">{{ related.title }}</h3>
                                    <p class="text-gray-600 text-sm">{{ related.excerpt }}</p>
                                </div>
                            </a>
                        }
                     </div>
                 } @else {
                    <p class="text-center text-gray-500">No related posts found.</p>
                 }
            </section>
        </div>
    } @else {
        <div class="text-center py-20">
            <h1 class="text-3xl font-bold text-gray-800">Post not found</h1>
            <p class="text-gray-600 mt-2">Sorry, we couldn't find the blog post you were looking for.</p>
            <a routerLink="/blog" class="mt-6 inline-block bg-primary-600 text-white font-bold py-3 px-6 rounded-md hover:bg-primary-700 transition">
                Back to Blog
            </a>
        </div>
    }
</div>